---

################################################################################
# settings

default:
  tags:
    - linux
    - shell
    - build

stages:
  - generate_keystore
  - build
  - deploy
  
################################################################################
# jobs

generate_keystore:
  image: openjdk:11-jdk  # Use an image with JDK installed
  script:
    - echo "Java version:" && java -version  # Confirm Java is available
    - echo "Current working directory:" && pwd  # Show current directory
    - echo "Generating keystore..." 

blazegraph-image:
  stage: build
  script:
    - sudo apt-get update && apt-get install -y openjdk-11-jdk  # Install JDK
    - keytool -keystore keystore -alias jetty -genkey -keyalg RSA
    - cp keystore docker/keystore/etc
    - ls docker
    - cd docker
    - docker build -t ${CI_REGISTRY_IMAGE}:latest .
    - docker push ${CI_REGISTRY_IMAGE}:latest




# EOF ##########################################################################
